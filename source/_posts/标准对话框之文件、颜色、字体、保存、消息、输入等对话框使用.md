---
title: 标准对话框之文件、颜色、字体、保存、消息、输入等对话框使用
date: 2019-10-14 00:04:46
toc: true
categories: 
 - [学习 - qt]
 - [专栏 - Qt推倒重学系列]
tags: 
 - qt控件
---



**简  述：**  使用**自定义对话框**和**标准对话框**： `QFileDialog` `QInputDialog` and `QMessageDialog`等的使用：文件、颜色、字体、保存、消息、输入等对话框使用

[TOC]

## <font color=#D0087E  face="幼圆">同步博文：</font>

- <font color=#D0087E  size=4 face="幼圆">**本篇的[csdn](https://blog.csdn.net/qq_33154343)/[github.io](https://touwoyimuli.github.io/)同步博文:** </font> [标准对话框之文件、颜色、字体、保存、消息、输入等对话框使用](https://blog.csdn.net/qq_33154343/article/details/102540332)

<br>

## 标准对话框：

下面列举一些，常用的系统提供的标准对话框，**下面都是静态函数**：

### QFileDialog 文件对话框：

| 常用静态函数                   | 函数功能                             |
| :----------------------------- | :----------------------------------- |
| QString getOpenFileName()      | 选择打开一个文件                     |
| QStringList getOpenFileNames() | 选择打开**多**个文件                 |
| QString getSaveFileName()      | 选择保存一个文件                     |
| QString getExistingDirectory() | 选择**一个已有的**目录               |
| QUrl getOpenFileUrl()          | 选择打开一个文件，可选择远程网络文件 |

选择已有的目录，通常可以使还是用`QDir::currentPath()` 来获取当前应用程序的目录

<br>

### QColorDialog  颜色对话框:

| 常用静态函数      | 函数功能 |
| ----------------- | -------- |
| QColor gstColor() | 选择颜色 |

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191014000417.png"/>

<br>

### QFontDialog  字体对话框:

| 常用静态函数       | 函数功能     |
| ------------------ | ------------ |
| QString get Text() | 输入单行文字 |

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191014000534.png"/>

<br>

### QInputDialog    输入对话框:

| 常用静态函数                | 函数功能                   |
| --------------------------- | -------------------------- |
| QString get Text()          | 输入单行文字               |
| int getInt()                | 输入整数                   |
| double getDouble()          | 输入浮点数                 |
| Qsring getltem()            | 从一个下拉列表框中选择输入 |
| QString getMultiLine Text() | 输入多行字符串             |

<br>

### QMessageBox  消息对话框:

| 常用静态函数                | 函数功能                   |
| --------------------------- | -------------------------- |
| StandardButon information() | 信息提示对话框             |
| StandardButton question()   | 询问并获取是否确认的对话框 |
| StandardButton warning()    | 警告信息提示对话框         |
| StandardButton critical()   | 错误信息提示对话框         |
| void about()                | 设置自定义信息的关于对话框 |
| void aboutQt()              | 关于Qt的对话框             |

其在代码中的效果如如下：

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191013162112.png"/> 和

和 Qt 的

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191013162203.png"/>

<br>

## 运行效果：

写了一个小的项目来演示这几种标准对话框，编译环境如下：

**编程环境：**  `win10 x64 专业版 1803`  

**编程软件：**  `Qt Creator 4.8.2 (Enterprise)`， `Qt 5.9.8`

上一个最终的运行效果图：

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191013164633.gif"/>

<br>

## 核心源码：

因为运用比较简单， 所以就只是没有单据列举来说明：

```cpp
//标准文件对话框QFileDialog+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
void ExDialog::on_btnOpenFile_clicked()
{
    QString path = QDir::currentPath();                        //获取应用程序当前目录
    QString fileter = "文本文件(*.txt);;图片文件(*.jpg *.gif);;所有文件(*.*)";

    QString fileNmae = QFileDialog::getOpenFileName(this, "选择一个文件", path, fileter);
    if (! fileNmae.isEmpty()) {
        ui->plainTextEdit->appendPlainText(fileNmae);
    }
}

void ExDialog::on_btnOpenFiles_clicked()
{
    QString path = QDir::currentPath();                        //获取应用程序当前目录
    QString fileter = "文本文件(*.txt);;图片文件(*.jpg *.gif);;所有文件(*.*)";

    QStringList fileNmaeList = QFileDialog::getOpenFileNames(this, "选择多个文件", path, fileter);
    for (int i = 0; i < fileNmaeList.count(); i++) {
        ui->plainTextEdit->appendPlainText(fileNmaeList.at(i));
    }
}

void ExDialog::on_btnExistingDir_clicked()
{
    QString currPath = QCoreApplication::applicationDirPath(); //获取应用程序当前目录
    QString path = QFileDialog::getExistingDirectory(this, "选择一个目录【非文件】", currPath, QFileDialog::ShowDirsOnly);   //最后一个参数，表示只显示路径

    if (!path.isEmpty()) {
        ui->plainTextEdit->appendPlainText(path);
    }
}

void ExDialog::on_btnGetColor_clicked()
{
    QPalette pal = ui->plainTextEdit->palette();              //获取条调色板
    QColor initColor = pal.color(QPalette::Text);
    QColor color = QColorDialog::getColor(initColor, this, "选择颜色");

    if (color.isValid()) {                                    //因为没有.isEmpty(),故而使用.isValid()来判断
        pal.setColor(QPalette::Text, color);
        ui->plainTextEdit->setPalette(pal);
    }
}

void ExDialog::on_btnGetFont_clicked()
{
    QFont initFont = ui->plainTextEdit->font();
    bool ok = false;
    QFont font = QFontDialog::getFont(&ok, initFont);

    if (ok)
        ui->plainTextEdit->setFont(font);
}

void ExDialog::on_btnSaveFile_clicked()
{
    QString path = QDir::currentPath();                        //获取应用程序当前目录
    QString fileter = "头文件(*.h);;源文件(*.cpp);;所有文件(*.*)";
    QString fileNmae = QFileDialog::getSaveFileName(this, "保存文件", path, fileter);

    if (!fileNmae.isEmpty())
        ui->plainTextEdit->appendPlainText(fileNmae);
}

//标准消息对话框+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
void ExDialog::on_btnQuestion_clicked()
{
    QMessageBox::StandardButton ret = QMessageBox::question(this, "问题消息对话框", "question对话框的内容",  QMessageBox::Yes | QMessageBox::No | QMessageBox::Close, QMessageBox::NoButton);

    switch (ret) {
    case QMessageBox::Yes: {
        ui->plainTextEdit->appendPlainText("QMessageBox::yes 按钮被选中");
        break;
    }
    case QMessageBox::No: {
        ui->plainTextEdit->appendPlainText("QMessageBox::No 按钮被选中");
        break;
    }
    case QMessageBox::Close: {
        ui->plainTextEdit->appendPlainText("QMessageBox::Close 按钮被选中");
        break;
    }
    default: {
        ui->plainTextEdit->appendPlainText("这是 switch 的default 的选项");
        break;
    }
    }
}

void ExDialog::on_btnInformation_clicked()
{
    QMessageBox::information(this, "信息消息对话框", "information对话框的内容", QMessageBox::Ok, QMessageBox::NoButton);
}

void ExDialog::on_btnWarning_clicked()
{
    QMessageBox::warning(this, "警告消息对话框", "warning对话框的内容", QMessageBox::Ok, QMessageBox::NoButton);
}

void ExDialog::on_btnCritical_clicked()
{
    QMessageBox::critical(this, "危机消息对话框", "critical对话框的内容", QMessageBox::Ok, QMessageBox::NoButton);
}

void ExDialog::on_btnAbout_clicked()
{
    QMessageBox::about(this, "关于消息对话框", "abou 作者: 投我以木李，报之以琼玖");
}

void ExDialog::on_btnAboutQt_clicked()
{
    QMessageBox::aboutQt(this, "关于Qt消息对话框");
}

//标准输入对话框QInputDialog+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
void ExDialog::on_btnGetString_clicked()
{
    bool ok = false;
    QString text = QInputDialog::getText(this, "输入文字对话框", "请输入一个字符串", QLineEdit::Normal, "默认输入的字符串", &ok);

    if (ok && !text.isEmpty())
        ui->plainTextEdit->appendPlainText(text);
}

void ExDialog::on_btnGetItem_clicked()
{
    QStringList list;
    list<<"2019-10-02"<<"04:28"<<"在武汉的卧室"<<"敲代码"<<"这会没有困意";

    int index = 0;
    bool editable = true;   //ComboBox是否可编辑
    bool ok = false;
    QString text = QInputDialog::getItem(this, "输入item对话框", "请选择一个item", list, index, editable, &ok);

    if (ok && !text.isEmpty())
        ui->plainTextEdit->appendPlainText(text);
}

void ExDialog::on_btnInt_clicked()
{
    int min = 0;
    int max = 100;
    int stepVal = 3;
    int size = ui->plainTextEdit->font().pointSize();
    bool ok = false;
    int val = QInputDialog::getInt(this, "输入整数对话框", "请输入一个整数改变字体大小", size, min, max, stepVal, &ok);

    if (ok) {
        QFont font = ui->plainTextEdit->font();
        font.setPointSize(val);
        ui->plainTextEdit->setFont(font);
        ui->plainTextEdit->appendPlainText("字体大小已经被设置为:" + QString::number(val));
    }
}

void ExDialog::on_btnDouble_clicked()
{
    int min = 0;
    int max = 100;
    int d = 2;                 //小数点的位数
    double val = 3.1415;
    bool ok = false;
    double ret = QInputDialog::getDouble(this, "输入浮点数对话框", "请输入一个整数改变字体大小", d, min, max, val, &ok);

    if (ok)
        ui->plainTextEdit->appendPlainText("浮点数大小为:" + QString::number(ret, 'f', 4));
}
```

<br>

## 源码下载：

[https://github.com/touwoyimuli/QtExamples](https://github.com/touwoyimuli/QtExamples) 【QtQDialogEx】