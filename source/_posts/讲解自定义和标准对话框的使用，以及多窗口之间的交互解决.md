---
title: 讲解自定义和标准对话框的使用，以及多窗口之间的交互解决
date: 2019-10-15 00:03:22
toc: true
categories: 
 - [学习 - qt]
 - [专栏 - Qt推倒重学系列]
tags: 
 - qt控件
---



**简  述：**  写一个自定义和标准对话框的使用；还有关于模态对话框和非模态对话框的区别；以及多个`Dialog`对象之间，如何传递数据；

<!-- more -->

[TOC]

## <font color=#D0087E  face="幼圆">同步博文：</font>

- <font color=#D0087E  size=4 face="幼圆">**本篇的[csdn](https://blog.csdn.net/qq_33154343)/[github.io](https://touwoyimuli.github.io/)同步博文:** </font> [讲解自定义和标准对话框的使用，以及多窗口之间的交互解决](https://blog.csdn.net/qq_33154343/article/details/102559020)

<br>

## 对话框的生存期：

对话框的生存期是指它从创建到删除的存续区间。

<br>

## 模态对话框：

对话框是以**模态**（**Modal**)方式显示的，即用`QDialog:exec()`函数显示。模态显示的对话框不允许鼠标再去单击其他窗口，直到对话框退出。

**模态方式显示：**必须关闭此对话框才可以返回主窗口操作

<br>

## 非模态对话框:

使用`QDialog::show()`，则能以**非模态**（**Modeless**)方式显示对话框。非模态显示的对话框在显示后继续运行主程序，还可以在主窗口上操作，主窗口和非模态对话框之间可以交互控制，典型的例子是文字编辑软件里的“查找/替换”对话框。

<br>

**有着一些关联的博文其他参考：**

- 

<br><br><br><br><br><br>运行效果：

## 运行环境如下：

**编程环境：**  `win10 x64 专业版 1803`  

**编程软件：**  `Qt Creator 4.8.2 (Enterprise)`， `Qt 5.9.8`

写了一个小的例子，源码见下面，上一个最终的运行效果图：

<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20191008001023.gif"/>

<br>

## 窗口之间的交互：

这里提供两个思路：

> 如本例子设计的**ExDlgLocate**和**ExCustomMainWin**之间的交互，均是**有着对方对象的指针**

在`ExDlgLocate`类里面函数实现， `ExCustomMainWin* parWind = (ExCustomMainWin*)parentWidget()`：

```cpp
//设置文字
void ExDlgLocate::on_btnSetText_clicked()
{
    int row = ui->spinBoxRow->value();                                     //定位到单元格，并且设置字符串
    int col = ui->spinBoxCol->value();

    ExCustomMainWin* parWind = (ExCustomMainWin*)parentWidget();           //向具体的item中填写字符串
    parWind->setACellText(row, col, ui->lineEdit->text());

    if (ui->checkBoxRow->isChecked())
        ui->spinBoxRow->setValue(1 + ui->spinBoxRow->value());
    if (ui->checkBoxCol->isChecked())
        ui->spinBoxCol->setValue(1 + ui->spinBoxCol->value());
}
```

同样的， 在`ExCustomMainWin`类里面，也可以找到

```cpp
class ExCustomMainWin : public QMainWindow
{
...
private:
    QStandardItemModel *m_model;                        //数据模型
    QItemSelectionModel *m_seleModel;                   //item选择模型
    ExDlgSetHeaders *m_dlgSetHeaders;
    ExDlgLocate *m_dlglocate;
...
};
```

另外一个思路：

> 利用Qt优秀的信号与槽机制

无需再在`ExCustomMainWin`类里面，保持`ExDlgLocate`对话框的指针。而是在ExCustomMainWin和ExDlgLocate的类里面，定义一些信号和槽来使用`connect`代替实现。

<br>

## 源码下载：

[https://github.com/touwoyimuli/QtExamples](https://github.com/touwoyimuli/QtExamples) 【xxx】